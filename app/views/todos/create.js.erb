function refreshForm(innerHTML) {
  const newTodoForm = document.getElementById('new_todo');
  newTodoForm.innerHTML = innerHTML;
}

function addTodo(todoHTML) {
  const todos = document.getElementById('todos');
  todos.insertAdjacentHTML('beforeend', todoHTML);
}

<% if @todo.errors.any? %>
  refreshForm('<%= j render "shared/todos_form", todo: @todo %>');
<% else %>
  addTodo('<%= j render "shared/todos_card", todo: @todo %>');
  refreshForm('<%= j render "shared/todos_form", todo: Todo.new %>');
<% end %>
